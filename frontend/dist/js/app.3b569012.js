(function(o){function e(e){for(var t,a,c=e[0],i=e[1],l=e[2],f=0,p=[];f<c.length;f++)a=c[f],r[a]&&p.push(r[a][0]),r[a]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(o[t]=i[t]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var o,e=0;e<s.length;e++){for(var n=s[e],t=!0,c=1;c<n.length;c++){var i=n[c];0!==r[i]&&(t=!1)}t&&(s.splice(e--,1),o=a(a.s=n[0]))}return o}var t={},r={app:0},s=[];function a(e){if(t[e])return t[e].exports;var n=t[e]={i:e,l:!1,exports:{}};return o[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=o,a.c=t,a.d=function(o,e,n){a.o(o,e)||Object.defineProperty(o,e,{enumerable:!0,get:n})},a.r=function(o){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,e){if(1&e&&(o=a(o)),8&e)return o;if(4&e&&"object"===typeof o&&o&&o.__esModule)return o;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:o}),2&e&&"string"!=typeof o)for(var t in o)a.d(n,t,function(e){return o[e]}.bind(null,t));return n},a.n=function(o){var e=o&&o.__esModule?function(){return o["default"]}:function(){return o};return a.d(e,"a",e),e},a.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},a.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=i;s.push([0,"chunk-vendors"]),n()})({0:function(o,e,n){o.exports=n("56d7")},"034f":function(o,e,n){"use strict";var t=n("64a9"),r=n.n(t);r.a},"080f":function(o,e,n){},2625:function(o,e,n){"use strict";var t=n("9698"),r=n.n(t);r.a},"56d7":function(o,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var t=n("2b0e"),r=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],a=(n("6b54"),n("a481"),n("66f9")),c=(n("1ec6"),n("cc7d")),i=n.n(c),l={name:"app",components:{chessboard:a["chessboard"]},watch:{positionInfo:function(o,e){var n=this;console.log("new move"),o!==e&&(console.log(o),n.socket.send(JSON.stringify({fen:o.fen})))}},data:function(){return{currentFen:"",positionInfo:null,player:"white",socket:null,uuid:null}},methods:{uuidv4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var e=16*Math.random()|0,n="x"==o?e:3&e|8;return n.toString(16)})},showInfo:function(o){this.positionInfo=o},resetGame:function(){if(!confirm("Want to promote to rook? Queen by default"))return!1;this.currentFen=""},promote:function(){return confirm("Want to promote to rook? Queen by default")?"r":"q"}},created:function(){},mounted:function(){}},u=l,f=(n("034f"),n("2877")),p=Object(f["a"])(u,r,s,!1,null,null,null),d=p.exports,m=n("8c4f"),h=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{attrs:{id:"room"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.room_name,expression:"room_name"}],staticClass:"btn",attrs:{type:"text",placeholder:"Digite o nome da sala"},domProps:{value:o.room_name},on:{input:function(e){e.target.composing||(o.room_name=e.target.value)}}}),n("router-link",{staticClass:"btn",attrs:{to:"/"+o.room_name}},[o._v("Entrar")]),n("table",{staticClass:"rooms_table"},[o._m(0),n("tbody",o._l(o.rooms,function(e,t){return n("tr",[n("td",[o._v("\n         "+o._s(t)+"\n       ")]),n("td",[o._v("\n         "+o._s(e.sessions.length)+"\n       ")]),n("td",[n("router-link",{staticClass:"btn",attrs:{to:"/"+t}},[o._v("Join")])],1)])}),0)])],1)},v=[function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("thead",[n("tr",[n("th",[o._v("\n         Room\n       ")]),n("th",[o._v("\n         Users\n       ")]),n("th")])])}],g=n("7618"),y={name:"app",components:{chessboard:a["chessboard"]},watch:{positionInfo:function(o,e){var n=this;console.log("new move"),o!==e&&(console.log(o),n.socket.send(JSON.stringify({fen:o.fen})))}},data:function(){return{currentFen:"",positionInfo:null,player:"white",socket:null,rooms:null,room_name:""}},methods:{showInfo:function(o){this.positionInfo=o},resetGame:function(){if(!confirm("Want to promote to rook? Queen by default"))return!1;this.currentFen=""},promote:function(){return confirm("Want to promote to rook? Queen by default")?"r":"q"}},created:function(){},mounted:function(){var o=this;this.socket=new i.a("/ws"),this.socket.onopen=function(){console.log("connected");setInterval(function(){o.socket.send(JSON.stringify({type:"get_rooms"}))},2e3)},o.socket.onmessage=function(e){var n;console.log(e.data),console.log(Object(g["a"])(e.data)),n="string"==typeof e.data?JSON.parse(e.data):e.data,o.rooms=n,console.log(n),console.log(n)},o.socket.onclose=function(){o.socket=new i.a("/ws"),console.log("close")}}},b=y,_=(n("2625"),Object(f["a"])(b,h,v,!1,null,null,null)),w=_.exports,x=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{attrs:{id:"game"}},[n("div",{attrs:{id:"board"}},[o.player.role?n("span",[o._v("You've joined as "+o._s(o.player.role))]):o._e(),n("br"),o.positionInfo?n("span",[o._v("Now it's "+o._s(o.positionInfo.turn)+"'s turn")]):o._e(),"white"==o.player.role?n("chessboard",{attrs:{fen:o.currentFen,onPromotion:o.promote},on:{onMove:o.showInfo}}):o._e(),"black"==o.player.role?n("chessboard",{attrs:{orientation:"black",fen:o.currentFen,onPromotion:o.promote},on:{onMove:o.showInfo}}):o._e(),"watcher"==o.player.role?n("chessboard",{staticStyle:{"pointer-events":"none"},attrs:{fen:o.currentFen}}):o._e()],1)])},k=[],I={name:"app",components:{chessboard:a["chessboard"]},watch:{currentFen:function(o,e){var n=this;console.log("new move"),console.log(n.positionInfo)}},data:function(){return{currentFen:"",positionInfo:null,player:"white",socket:null}},methods:{showInfo:function(o){var e=this;e.socket&&e.socket.send(JSON.stringify({type:"new_move",player:e.player.role,room:e.room,fen:o.fen})),this.positionInfo=o,console.log(e.positionInfo),e.positionInfo.turn==e.player.role?(console.log("enable click"),document.getElementById("board").style.pointerEvents="auto"):(console.log("disable click"),document.getElementById("board").style.pointerEvents="none")},resetGame:function(){if(!confirm("Want to reset the game?"))return!1;this.currentFen=""},promote:function(){return confirm("Want to promote to rook? Queen by default")?"r":"q"}},created:function(){this.room=this.$route.params.room_name},mounted:function(){var o=this;this.socket=new i.a("/ws","websocket",{debug:!0}),this.socket.onopen=function(){console.log("connected");setInterval(function(){o.socket.send(JSON.stringify({type:"keepalive"}))},1e3);o.socket.send(JSON.stringify({type:"new_player",room:o.room}))},o.socket.onmessage=function(e){var n;console.log("ao"),console.log(e.data),console.log(Object(g["a"])(e.data)),n="string"==typeof e.data?JSON.parse(e.data):e.data,console.log(n.type),"set_player"==n.type&&(console.log("setting color"),o.player=n,console.log(o.player)),"update"==n.type&&(console.log("new move"),o.currentFen=n.fen)},o.socket.onclose=function(){o.socket=new i.a("/ws","websocket",{debug:!0}),console.log("close")}}},O=I,S=(n("7975"),Object(f["a"])(O,x,k,!1,null,null,null)),j=S.exports;t["a"].use(m["a"]);var F=new m["a"]({mode:"history",base:"/",routes:[{path:"/",name:"room",component:w},{path:"/:room_name",name:"play",component:j}]});t["a"].config.productionTip=!1,new t["a"]({router:F,render:function(o){return o(d)}}).$mount("#app")},"64a9":function(o,e,n){},7975:function(o,e,n){"use strict";var t=n("080f"),r=n.n(t);r.a},9698:function(o,e,n){}});
//# sourceMappingURL=app.3b569012.js.map