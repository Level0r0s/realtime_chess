(function(e){function o(o){for(var t,a,c=o[0],i=o[1],l=o[2],f=0,p=[];f<c.length;f++)a=c[f],r[a]&&p.push(r[a][0]),r[a]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t]);u&&u(o);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,o=0;o<s.length;o++){for(var n=s[o],t=!0,c=1;c<n.length;c++){var i=n[c];0!==r[i]&&(t=!1)}t&&(s.splice(o--,1),e=a(a.s=n[0]))}return e}var t={},r={app:0},s=[];function a(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,o,n){a.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,o){if(1&o&&(e=a(e)),8&o)return e;if(4&o&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var t in e)a.d(n,t,function(o){return e[o]}.bind(null,t));return n},a.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(o,"a",o),o},a.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},a.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=o,c=c.slice();for(var l=0;l<c.length;l++)o(c[l]);var u=i;s.push([0,"chunk-vendors"]),n()})({0:function(e,o,n){e.exports=n("56d7")},"034f":function(e,o,n){"use strict";var t=n("64a9"),r=n.n(t);r.a},"080f":function(e,o,n){},2625:function(e,o,n){"use strict";var t=n("9698"),r=n.n(t);r.a},"56d7":function(e,o,n){"use strict";n.r(o);n("cadf"),n("551c"),n("f751"),n("097d");var t=n("2b0e"),r=function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],a=n("7618"),c=(n("6b54"),n("a481"),n("66f9")),i=(n("1ec6"),n("cc7d")),l=n.n(i),u={name:"app",components:{chessboard:c["chessboard"]},watch:{positionInfo:function(e,o){var n=this;console.log("new move"),e!==o&&(console.log(e),n.socket.send(JSON.stringify({fen:e.fen})))}},data:function(){return{currentFen:"",positionInfo:null,player:"white",socket:null,uuid:null}},methods:{uuidv4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var o=16*Math.random()|0,n="x"==e?o:3&o|8;return n.toString(16)})},showInfo:function(e){this.positionInfo=e},resetGame:function(){if(!confirm("Want to promote to rook? Queen by default"))return!1;this.currentFen=""},promote:function(){return confirm("Want to promote to rook? Queen by default")?"r":"q"}},created:function(){},mounted:function(){var e=this;this.socket=new l.a("/ws"),this.socket.onopen=function(){console.log("connected");setInterval(function(){e.conn.send(JSON.stringify({type:"keepalive",peer_id:e.uuid}))},1e3);e.conn.send(JSON.stringify({type:"new_peer",peer:e.uuid,room:e.room}))},e.socket.onmessage=function(o){var n;console.log("ao"),console.log(o.data),console.log(Object(a["a"])(o.data)),n="string"==typeof o.data?JSON.parse(o.data):o.data,console.log(n),e.currentFen=o.data.fen},e.socket.onclose=function(){e.socket=new l.a("/ws"),console.log("close")}}},f=u,p=(n("034f"),n("2877")),d=Object(p["a"])(f,r,s,!1,null,null,null),m=d.exports,h=n("8c4f"),g=function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("div",{attrs:{id:"room"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.room_name,expression:"room_name"}],staticClass:"btn",attrs:{type:"text",placeholder:"Digite o nome da sala"},domProps:{value:e.room_name},on:{input:function(o){o.target.composing||(e.room_name=o.target.value)}}}),n("router-link",{staticClass:"btn",attrs:{to:"/"+e.room_name}},[e._v("Entrar")]),n("table",{staticClass:"rooms_table"},[e._m(0),n("tbody",e._l(e.rooms,function(o,t){return n("tr",[n("td",[e._v("\n         "+e._s(t)+"\n       ")]),n("td",[e._v("\n         "+e._s(o.sessions.length)+"\n       ")]),n("td",[n("router-link",{staticClass:"btn",attrs:{to:"/"+t}},[e._v("Join")])],1)])}),0)])],1)},v=[function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("thead",[n("tr",[n("th",[e._v("\n         Room\n       ")]),n("th",[e._v("\n         Users\n       ")]),n("th")])])}],y={name:"app",components:{chessboard:c["chessboard"]},watch:{positionInfo:function(e,o){var n=this;console.log("new move"),e!==o&&(console.log(e),n.socket.send(JSON.stringify({fen:e.fen})))}},data:function(){return{currentFen:"",positionInfo:null,player:"white",socket:null,rooms:null,room_name:""}},methods:{showInfo:function(e){this.positionInfo=e},resetGame:function(){if(!confirm("Want to promote to rook? Queen by default"))return!1;this.currentFen=""},promote:function(){return confirm("Want to promote to rook? Queen by default")?"r":"q"}},created:function(){},mounted:function(){var e=this;this.socket=new l.a("/ws"),this.socket.onopen=function(){console.log("connected");setInterval(function(){e.socket.send(JSON.stringify({type:"get_rooms"}))},2e3)},e.socket.onmessage=function(o){var n;console.log(o.data),console.log(Object(a["a"])(o.data)),n="string"==typeof o.data?JSON.parse(o.data):o.data,e.rooms=n,console.log(n),console.log(n)},e.socket.onclose=function(){e.socket=new l.a("/ws"),console.log("close")}}},b=y,w=(n("2625"),Object(p["a"])(b,g,v,!1,null,null,null)),_=w.exports,k=function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("div",{attrs:{id:"game"}},[n("div",{attrs:{id:"board"}},[e.player.role?n("span",[e._v("You've joined as "+e._s(e.player.role))]):e._e(),n("br"),e.positionInfo?n("span",[e._v("Now it's "+e._s(e.positionInfo.turn)+"'s turn")]):e._e(),"white"==e.player.role?n("chessboard",{attrs:{fen:e.currentFen,onPromotion:e.promote},on:{onMove:e.showInfo}}):e._e(),"black"==e.player.role?n("chessboard",{attrs:{orientation:"black",fen:e.currentFen,onPromotion:e.promote},on:{onMove:e.showInfo}}):e._e(),"watcher"==e.player.role?n("chessboard",{staticStyle:{"pointer-events":"none"},attrs:{fen:e.currentFen}}):e._e()],1)])},x=[],O={name:"app",components:{chessboard:c["chessboard"]},watch:{currentFen:function(e,o){var n=this;console.log("new move"),console.log(n.positionInfo)}},data:function(){return{currentFen:"",positionInfo:null,player:"white",socket:null}},methods:{showInfo:function(e){var o=this;o.socket&&o.socket.send(JSON.stringify({type:"new_move",player:o.player.role,room:o.room,fen:e.fen})),this.positionInfo=e,console.log(o.positionInfo),o.positionInfo.turn==o.player.role?(console.log("enable click"),document.getElementById("board").style.pointerEvents="auto"):(console.log("disable click"),document.getElementById("board").style.pointerEvents="none")},resetGame:function(){if(!confirm("Want to reset the game?"))return!1;this.currentFen=""},promote:function(){return confirm("Want to promote to rook? Queen by default")?"r":"q"}},created:function(){this.room=this.$route.params.room_name},mounted:function(){var e=this;this.socket=new l.a("/ws","websocket",{debug:!0}),this.socket.onopen=function(){console.log("connected");setInterval(function(){e.socket.send(JSON.stringify({type:"keepalive"}))},1e3);e.socket.send(JSON.stringify({type:"new_player",room:e.room}))},e.socket.onmessage=function(o){var n;console.log("ao"),console.log(o.data),console.log(Object(a["a"])(o.data)),n="string"==typeof o.data?JSON.parse(o.data):o.data,console.log(n.type),"set_player"==n.type&&(console.log("setting color"),e.player=n,console.log(e.player)),"update"==n.type&&(console.log("new move"),e.currentFen=n.fen)},e.socket.onclose=function(){e.socket=new l.a("/ws","websocket",{debug:!0}),console.log("close")}}},I=O,S=(n("7975"),Object(p["a"])(I,k,x,!1,null,null,null)),j=S.exports;t["a"].use(h["a"]);var J=new h["a"]({mode:"history",base:"/",routes:[{path:"/",name:"room",component:_},{path:"/:room_name",name:"play",component:j}]});t["a"].config.productionTip=!1,new t["a"]({router:J,render:function(e){return e(m)}}).$mount("#app")},"64a9":function(e,o,n){},7975:function(e,o,n){"use strict";var t=n("080f"),r=n.n(t);r.a},9698:function(e,o,n){}});
//# sourceMappingURL=app.1a5afa23.js.map